<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dayflow HRMS</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>

<!-- HERO BACKGROUND -->
<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center text-white text-center"
     style="
       background:
         linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),
         url('https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1200&q=60');
       background-size: cover;
       background-position: center;
     ">

  <div>
    <h1 class="fw-bold display-4">Dayflow HRMS</h1>
    <p class="fs-5">Secure & Role-Based Authentication</p>

    <button class="btn btn-dark btn-lg mt-4"
            data-bs-toggle="modal"
            data-bs-target="#loginModal">
      Login
    </button>
  </div>
</div>

<!-- LOGIN MODAL -->
<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title">Login</h5>
        <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">

        <form onsubmit="login(event)">

          <!-- ROLE -->
          <div class="mb-3">
            <label class="form-label">Login As</label>
            <select class="form-select" id="role" onchange="toggleFields()" required>
              <option value="">Select Role</option>
              <option value="admin">Admin / HR</option>
              <option value="employee">Employee</option>
            </select>
          </div>

          <!-- ADMIN UNIQUE ID -->
          <div class="mb-3 d-none" id="adminField">
            <label class="form-label">Admin Unique ID</label>
            <input type="text" class="form-control" id="adminId" placeholder="ADMIN-001">
          </div>

          <!-- EMPLOYEE EMAIL -->
          <div class="mb-3 d-none" id="employeeField">
            <label class="form-label">Employee Email</label>
            <input type="email" class="form-control" id="empEmail" placeholder="emp@hrms.com">
          </div>

          <!-- PASSWORD -->
          <div class="mb-2">
            <label class="form-label">Password</label>
            <div class="position-relative d-flex align-items-center">
              <input type="password"
                     class="form-control pe-5"
                     id="password"
                     required>

              <i class="bi bi-eye text-muted position-absolute end-0 me-3"
                 style="cursor:pointer;"
                 onclick="togglePassword(this)"></i>
            </div>
          </div>

          <!-- PASSWORD ERROR -->
          <div id="passwordError" class="text-danger small mb-2 d-none"></div>

          <!-- LOGIN BUTTON -->
          <button class="btn btn-dark w-100">
            Secure Login
          </button>

        </form>

      </div>

      <div class="modal-footer justify-content-center">
        <small class="text-muted">Â© 2026 Dayflow HRMS</small>
      </div>

    </div>
  </div>
</div>

<!-- ADMIN DASHBOARD -->
<div id="adminPanel" class="container mt-5 d-none">
  <div class="alert alert-success shadow">
    <h4>Admin / HR Dashboard</h4>
    <p>Verified by <strong>Unique Admin ID</strong></p>
    <button class="btn btn-danger" onclick="logout()">Logout</button>
  </div>
</div>

<!-- EMPLOYEE DASHBOARD -->
<div id="employeePanel" class="container mt-5 d-none">
  <div class="alert alert-info shadow">
    <h4>Employee Dashboard</h4>
    <p>Verified by <strong>Email</strong></p>
    <button class="btn btn-danger" onclick="logout()">Logout</button>
  </div>
</div>

<!-- JAVASCRIPT -->
<script>
  function toggleFields() {
    const role = document.getElementById("role").value;
    document.getElementById("adminField").classList.add("d-none");
    document.getElementById("employeeField").classList.add("d-none");

    if (role === "admin") document.getElementById("adminField").classList.remove("d-none");
    if (role === "employee") document.getElementById("employeeField").classList.remove("d-none");
  }

  function togglePassword(icon) {
    const pwd = document.getElementById("password");
    pwd.type = pwd.type === "password" ? "text" : "password";
    icon.classList.toggle("bi-eye-slash");
  }

  /* PASSWORD VALIDATION */
  function validatePassword(pwd) {
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/;
    return regex.test(pwd);
  }

  function login(e) {
    e.preventDefault();

    const role = document.getElementById("role").value;
    const password = document.getElementById("password").value;
    const errorBox = document.getElementById("passwordError");

    // Validate password strength
    if (!validatePassword(password)) {
      errorBox.classList.remove("d-none");
      errorBox.textContent =
        "Password must be at least 8 characters and include uppercase, lowercase, number & special character.";
      return;
    } else {
      errorBox.classList.add("d-none");
    }

    const ADMIN_DB = { id: "ADMIN-001", password: "Admin@123" };
    const EMP_DB = { email: "emp@hrms.com", password: "Emp@1234" };

    if (
      role === "admin" &&
      document.getElementById("adminId").value === ADMIN_DB.id &&
      password === ADMIN_DB.password
    ) {
      bootstrap.Modal.getInstance(document.getElementById("loginModal")).hide();
      showPanel("admin");
    } else if (
      role === "employee" &&
      document.getElementById("empEmail").value === EMP_DB.email &&
      password === EMP_DB.password
    ) {
      bootstrap.Modal.getInstance(document.getElementById("loginModal")).hide();
      showPanel("employee");
    } else {
      errorBox.classList.remove("d-none");
      errorBox.textContent = "Invalid login credentials.";
    }
  }

  function showPanel(type) {
    document.querySelector(".container-fluid").classList.add("d-none");
    if (type === "admin") document.getElementById("adminPanel").classList.remove("d-none");
    if (type === "employee") document.getElementById("employeePanel").classList.remove("d-none");
  }

  function logout() {
    location.reload();
  }
</script>

</body>
</html>